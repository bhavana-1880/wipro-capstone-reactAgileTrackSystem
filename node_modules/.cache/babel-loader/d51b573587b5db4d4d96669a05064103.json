{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/bhava/capstone/Capstone/ReactAgileTrackSystem/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/bhava/capstone/Capstone/ReactAgileTrackSystem/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _jsxFileName = \"C:\\\\Users\\\\bhava\\\\capstone\\\\Capstone\\\\ReactAgileTrackSystem\\\\src\\\\components\\\\Login\\\\Login.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useContext } from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { UserContext } from '../../context/UserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Login = function Login() {\n  _s();\n  var history = useHistory();\n  var _useContext = useContext(UserContext),\n    login = _useContext.login;\n  var formik = useFormik({\n    initialValues: {\n      email: '',\n      password: ''\n    },\n    validationSchema: Yup.object({\n      email: Yup.string().email('Invalid email format').required('Email is required'),\n      password: Yup.string().min(6, 'Password must be at least 6 characters').required('Password is required')\n    }),\n    onSubmit: function () {\n      var _onSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(values) {\n        var response, user;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"http://localhost:4000/users?email=\".concat(values.email, \"&password=\").concat(values.password));\n            case 3:\n              response = _context.sent;\n              if (response.data.length > 0) {\n                user = response.data[0];\n                login(user);\n                user.role === 'admin' ? history.push('/') : history.push('/profiles');\n              } else {\n                alert('Invalid email or password');\n              }\n              _context.next = 10;\n              break;\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('Error logging in:', _context.t0);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 7]]);\n      }));\n      function onSubmit(_x) {\n        return _onSubmit.apply(this, arguments);\n      }\n      return onSubmit;\n    }()\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: formik.handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Email:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          value: formik.values.email,\n          onChange: formik.handleChange,\n          onBlur: formik.handleBlur\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, _this), formik.touched.email && formik.errors.email && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red'\n        },\n        children: formik.errors.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 21\n      }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Password:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          value: formik.values.password,\n          onChange: formik.handleChange,\n          onBlur: formik.handleBlur\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, _this), formik.touched.password && formik.errors.password && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red'\n        },\n        children: formik.errors.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: function onClick() {\n        return history.push('/signup');\n      },\n      children: \"Sign Up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 9\n  }, _this);\n};\n_s(Login, \"YHqN56P7QgSSDA7LqNn7kDJ9UYA=\", false, function () {\n  return [useHistory, useFormik];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useContext","axios","useHistory","useFormik","Yup","UserContext","jsxDEV","_jsxDEV","Login","_s","history","_useContext","login","formik","initialValues","email","password","validationSchema","object","string","required","min","onSubmit","_onSubmit","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","response","user","wrap","_callee$","_context","prev","next","get","concat","sent","data","length","role","push","alert","t0","console","error","stop","_x","apply","arguments","children","fileName","_jsxFileName","lineNumber","columnNumber","_this","handleSubmit","type","name","value","onChange","handleChange","onBlur","handleBlur","touched","errors","style","color","onClick","_c","$RefreshReg$"],"sources":["C:/Users/bhava/capstone/Capstone/ReactAgileTrackSystem/src/components/Login/Login.js"],"sourcesContent":["import React, { useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { UserContext } from '../../context/UserContext';\r\n\r\nconst Login = () => {\r\n    const history = useHistory();\r\n    const { login } = useContext(UserContext);\r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            email: '',\r\n            password: '',\r\n        },\r\n        validationSchema: Yup.object({\r\n            email: Yup.string().email('Invalid email format').required('Email is required'),\r\n            password: Yup.string().min(6, 'Password must be at least 6 characters').required('Password is required'),\r\n        }),\r\n        onSubmit: async (values) => {\r\n            try {\r\n                const response = await axios.get(`http://localhost:4000/users?email=${values.email}&password=${values.password}`);\r\n                if (response.data.length > 0) {\r\n                    const user = response.data[0];\r\n                    login(user);\r\n                    user.role === 'admin' ? history.push('/') : history.push('/profiles');\r\n                } else {\r\n                    alert('Invalid email or password');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error logging in:', error);\r\n            }\r\n        },\r\n    });\r\n\r\n    return (\r\n        <div>\r\n            <h2>Login</h2>\r\n            <form onSubmit={formik.handleSubmit}>\r\n                <label>\r\n                    Email:\r\n                    <input\r\n                        type=\"email\"\r\n                        name=\"email\"\r\n                        value={formik.values.email}\r\n                        onChange={formik.handleChange}\r\n                        onBlur={formik.handleBlur}\r\n                    />\r\n                </label>\r\n                {formik.touched.email && formik.errors.email && (\r\n                    <p style={{ color: 'red' }}>{formik.errors.email}</p>\r\n                )}\r\n\r\n                <label>\r\n                    Password:\r\n                    <input\r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        value={formik.values.password}\r\n                        onChange={formik.handleChange}\r\n                        onBlur={formik.handleBlur}\r\n                    />\r\n                </label>\r\n                {formik.touched.password && formik.errors.password && (\r\n                    <p style={{ color: 'red' }}>{formik.errors.password}</p>\r\n                )}\r\n\r\n                <button type=\"submit\">Login</button>\r\n            </form>\r\n            <button onClick={() => history.push('/signup')}>Sign Up</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}